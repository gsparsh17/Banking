{% extends "base.html" %}
{% load static %}
{% block body %}
<style>
    h1{
        color: rgb(255, 234, 46);
    }
    h3{
        color: rgb(255, 234, 46);
    }
    .main{
        padding: 30px;
    }
    .flex{
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Poppins', sans-serif;
        color: var(--dark-color);
        background: var(--light-purple-color);
    }
    .popup{
    margin-top: 30px;
    background-color: rgb(255, 234, 46);
    padding: 1rem 1rem 3rem 2rem;
    width: 800px;
    height: 580px;
    border-top-left-radius: 1.5rem;
    border-bottom-right-radius: 1.5rem;
    position: relative;
    box-shadow: 2px 2px 3px black, 2px 2px 3px black,  2px 2px 3px black;
    text-align: center;
    }
    img{
      display: block;
      margin-left: auto;
      margin-right: auto;
      margin-bottom: 10px;
    }
    h2{
        color: rgb(93, 174, 255);
        font-family: 'Times New Roman', Times, serif;
        margin-bottom: 10px;
    }
    .btn1{
        background-color: rgb(93, 174, 255);
        color: rgb(255, 234, 46);
        height: 60px;
        margin: 30px;
        display: block;
        width:fit-content;
        margin-left:auto;
        margin-right: auto;
        border-radius: 10px;
        box-shadow: 1px 1px 1px black;
    }
    .btn:hover{
        box-shadow: 2px 2px 2px aqua;
    }
    a:hover{
        text-decoration: none;
    }
    .hr{
        margin: 20px;
        color: rgb(93, 174, 255);
    }
    #wrapper{
        overflow:auto;
    }
    .c2{
        display: block;
        position:absolute;
        background:rgb(255, 234, 46);
        height: 400px;
        width: 200px;
        margin-left: 83%;
        border: 4px solid blueviolet;
        border-radius: 10px;
        padding: 0px;
        text-align: center;
    }
    p{
        color: blueviolet;
        padding: 5px;
    }
    #hr{
        background-color: blueviolet;
        margin: 0px;
        margin-bottom: 5px;
        padding-bottom: 5px;
        color: rgb(255, 234, 46);
    }
    .carousel-item{
        margin-left:0%;
        margin-right: 0%;
        height: 400px;
        width: 100%;

    }
    img{
        height: auto;
        opacity: 90%;
    }
    .carousel-caption{
        font-size:30px;
        color:rgb(85, 170, 255);
        text-shadow: 1px 1px 3px black;
    }
    span{
        color: blueviolet;
    }
    .loginPopup {
        position: relative;
        text-align: center;
        width: 100%;
      }
      .formPopup {
        display: none;
        position: fixed;
        left: 50%;
        top: 30%;
        transform: translate(-50%, 5%);
        border: 3px solid blueviolet;
        box-shadow: 0 0 5px 5px blueviolet;
        z-index: 9;
      }
      .formContainer {
        max-width: 300px;
        padding: 20px;
        background-color: rgb(255, 234, 46);
      }
      /* .formContainer input[type=text],
      .formContainer input[type=password] {
        width: 100%;
        padding: 15px;
        margin: 5px 0 20px 0;
        border: none;
        background: #eee;
      }
      .formContainer input[type=text]:focus,
      .formContainer input[type=password]:focus {
        background-color: #ddd;
        outline: none;
      } */
      .formContainer .btn {
        padding: 12px 20px;
        border: none;
        background-color: #8ebf42;
        color: #fff;
        cursor: pointer;
        width: 100%;
        margin-bottom: 15px;
        opacity: 0.8;
      }
      .formContainer .cancel {
        background-color: #cc0000;
      }
      .formContainer .btn:hover,
      .openButton:hover {
        opacity: 1;
      }
      #sub{
  z-index: 2;
  display: none;
}
#mes{
  color: red;
  margin-top: 10px;
  display: none;
}
#gen{
  margin-top: 10px;
}
.otp-field {
  display: flex;
}
.otp-field input {
  width: 50px;
  font-size: 32px;
  padding: 10px;
  text-align: center;
  border-radius: 5px;
  margin: 2px;
  border: 2px solid blueviolet;
  background: rgb(255, 234, 46);
  font-weight: bold;
  color: #fff;
  outline: none;
  transition: all 0.1s;
}
#otp{
        /* position: absolute;
        top: 30%;
        left: 15%;
        box-shadow: 0 0 5px 5px blueviolet;
        width: 500px;
        border: 2px solid blueviolet;
        border-radius: 20px; */
        margin-left: auto;
        margin-right: auto;
        font-family: "Poppins", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        /* background: rgb(93, 174, 255); */
        color: rgb(255, 234, 46);
        display: none;
}
.otp-field input:focus {
  border: 2px solid #a527ff;
  box-shadow: 0 0 2px 2px #a527ff6a;
}
.disabled {
  opacity: 0.5;
}
.space {
  margin-right: 1rem !important;
}

</style>
<script>
</script>
<div class="main" id="wrapper">
<h1>Welcome {{request.user.first_name}} ! </h1>
<h3>Congratulations, Your BOL Bank Account is Openned Now.</h3>
<div class="c2">
    <h2 class="hr" id="hr">Services</h2>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. 
            Vitae modi aperiam illo maiores, corrupti reiciendis aut, soluta quod perspiciatis omnis est nisi cupiditate dicta cum perferendis recusandae animi autem similique.
        </p>
        </div>
<div class="flex">
    <div id="popup" class="popup">
        <img src="{% static 'images/Screenshot_2024-01-31_170324-removebg-preview.png' %}" alt="" width="200" height="200">
        <h2 class="hr">Your Account Balance is : Rs.<span id="in"></span></h2>
        <button type="button" class="btn1 btn btn-warning" id="add" onclick="openForm('Add')"><a><h3>Add Amount</h3></a></button>
        <button type="button" class="btn1 btn btn-warning" id="sub1" onclick="openForm('Sub')"><a><h3>Withdraw Amount</h3></a></button>
    </div>
</div>
</div>
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="d-block w-100" src="https://images.unsplash.com/photo-1589758438368-0ad531db3366?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="First slide">
        <div class="carousel-caption d-none d-md-block">
            <h5>Credit Cards</h5>
            <p>Get Instant Discounts on Merchant Payments</p>
          </div>
    </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="https://plus.unsplash.com/premium_photo-1661713745866-73b31bac31a2?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDE2fHx8ZW58MHx8fHx8" alt="Second slide">
        <div class="carousel-caption d-none d-md-block">
            <h5>NearBy ATMs</h5>
            <p>Easy Usable Services</p>
          </div>
    </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="https://images.unsplash.com/photo-1556742111-a301076d9d18?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Third slide">
        <div class="carousel-caption d-none d-md-block">
            <h5>UPI Transactions</h5>
            <p>Fastest Debit Cards Payments</p>
          </div>
    </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  <div class="loginPopup">
    <div class="formPopup" id="popupForm">
      <form class="formContainer" method="POST">
        {% csrf_token %}
        <h2>Enter Amount</h2>
        <input type="tel" id="amount" placeholder="Rs. 0000" name="amount" value="" required>
        <div id="otp">
          <h2 class="hr">Enter OTP</h2>
          <div class="otp-field">
          <input type="text" maxlength="1"/>
          <input type="text" maxlength="1"/>
          <input type="text" maxlength="1" />
          <input type="text" maxlength="1" />
          </div>
        </div>
        <button type="button" class="btn btn1" id="gen"><h3>Verify</h3></button>
        <p id="mes">Wrong OTP, Please Try Again !!</p>
        <button type="button" class="btn btn1 cancel btn-warning" id="sub" onclick="closeForm()"><h3>ADD</h3></button>
      </form>
    </div>
  </div>
  <script>
    let OTP = '';
// Example starter JavaScript for disabling form submissions if there are invalid fields
document.getElementById("gen").addEventListener("click",generateOTP)

  function generateOTP() {
    OTP='';
    document.getElementById('otp').style.display='flex';
 // Declare a digits variable
 // which stores all digits 
 let digits = '0123456789';
 for (let i = 0; i < 4; i++) {
     OTP += digits[Math.floor(Math.random() * 10)];
 }
alert("Your OTP For Bank Of Lucknow Account Is: "+OTP)
 
}
const inputs = document.querySelectorAll(".otp-field input");

inputs.forEach((input, index) => {
    input.dataset.index = index;
    input.addEventListener("keyup", handleOtp);
    input.addEventListener("paste", handleOnPasteOtp);
});
function handleOtp(e) {
    /**
     * <input type="text" ðŸ‘‰ maxlength="1" />
     * ðŸ‘‰ NOTE: On mobile devices `maxlength` property isn't supported,
     * So we to write our own logic to make it work. ðŸ™‚
     */
    const input = e.target;
    let value = input.value;
    let isValidInput = value.match(/[0-9a-z]/gi);
    input.value = "";
    input.value = isValidInput ? value[0] : "";

    let fieldIndex = input.dataset.index;
    if (fieldIndex < inputs.length - 1 && isValidInput) {
        input.nextElementSibling.focus();
    }

    if (e.key === "Backspace" && fieldIndex > 0) {
        input.previousElementSibling.focus();
    }

    if (fieldIndex == inputs.length - 1 && isValidInput) {
        submit();
    }
}

function handleOnPasteOtp(e) {
    const data = e.clipboardData.getData("text");
    const value = data.split("");
    if (value.length === inputs.length) {
        inputs.forEach((input, index) => (input.value = value[index]));
        submit();
    }
}

function submit() {
    console.log("Submitting...");
    // ðŸ‘‡ Entered OTP
    let otp = "";
    inputs.forEach((input) => {
        otp += input.value;
        input.value='';
        // input.disabled = true;
        // input.classList.add("disabled");
    });
    console.log(otp);
    console.log(document.getElementById("amount").value);
    console.log(OTP)
    if(otp==OTP)
    {
    document.getElementById('otp').style.display='none';
    document.getElementById('sub').style.display='flex';
    document.getElementById('gen').style.display='none';
    document.getElementById('mes').style.display='none';
    }
    else
    {
    document.getElementById('otp').style.display='none';
    document.getElementById('mes').style.display='block';
    }
}
    var amount=0;
    document.getElementById("in").innerHTML=amount;
    var message1;
    function openForm(message) {
      message1=message;
      document.getElementById('sub').style.display='none';
      document.getElementById('otp').style.display='none';
      document.getElementById('gen').style.display='block';
        if(message=='Sub'){
          console.log(message)
          document.getElementById("sub").innerHTML="<h3>Withdraw</h3>";
        }
        document.getElementById("popupForm").style.display = "block";
      }
      function closeForm(message) {
        document.getElementById("popupForm").style.display = "none";
        ini=document.getElementById("in").innerHTML;
        fin=document.getElementById("amount").value;

        document.getElementById("in").innerHTML= +ini + +fin;
        if(message1=='Sub'){
          document.getElementById("in").innerHTML= +ini - +fin;
        }
      }
    </script>â€‹
{% endblock body %}
